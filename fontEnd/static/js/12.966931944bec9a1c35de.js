webpackJsonp([12],{"I/56":function(e,t){},XJOZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("exGp"),o=s.n(r),i=s("Dd8w"),c=s.n(i),m=s("NYxO"),u=s("ZYmg"),l={data:function(){return{form:{nickName:"",sex:"",info:""},fileList:[],sendedImg:"",password:""}},mounted:function(){this.checkUserInfo()},methods:c()({},Object(m.b)(["getGrxx","checkLogin","logout","getPermissions"]),{checkUserInfo:function(){this.user.nickName&&(this.form.nickName=this.user.nickName),this.user.sex&&(this.form.sex=this.user.sex),this.user.info&&(this.form.info=this.user.info)},onSubmit:function(){this.password?this.updatedUserInfo(this.form.nickName,this.form.info,this.sex,this.user.name,this.password):this.checkUser("","updatedUserInfo")},$imgAdd:function(e,t){var s=this;u.a.upImg(t.miniurl).then(function(t){t.success?(s.$message({message:"图片上传成功",type:"success"}),s.$refs.md.$img2Url(e,t.data)):s.$message.error({message:"上传图片失败"})})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},uploadFile:function(e){var t=this,s=e.file,a=(s.name,new FileReader);s&&a.readAsDataURL(s),a.onload=function(){var e=a.result;u.a.upImg(e).then(function(e){e.success?t.checkUser(e.data,"changeHeadImg"):t.$message.error({message:"上传图片失败"})})}},checkUser:function(e,t){var s=this;this.$prompt("请输入密码","身份认证",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var n=a.value;s.password=s.$md5(n),"changeHeadImg"==t?s.changeHeadImg(e,s.$md5(n)):"updatedUserInfo"==t&&s.updatedUserInfo(s.form.nickName,s.form.info,s.form.sex,s.user.name,s.password)}).catch(function(){s.$message({type:"info",message:"取消更改"})})},changeHeadImg:function(e,t){var s=this;return o()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("aaa"),a.prev=1,a.next=4,u.a.changeHeadImg(e,s.user.name,t);case 4:r=a.sent,s.sendedImg=e,s.$message({type:"success",message:"头像更改成功!请重新登录"}),setTimeout(function(e){s.logout(),setTimeout(function(e){s.$router.push({path:"/login"})},1e3)},2e3),console.log(r),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),s.$message.error({message:"头像更改失败!请检查密码"});case 14:case"end":return a.stop()}},a,s,[[1,11]])}))()},updatedUserInfo:function(e,t,s,a,r){var i=this;return o()(n.a.mark(function o(){var c;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.updatedUserInfo(e,t,s,a,r);case 3:c=n.sent,i.$message({type:"success",message:"信息更新成功!请重新登录"}),setTimeout(function(e){i.logout(),setTimeout(function(e){i.$router.push({path:"/login"})},1e3)},2e3),console.log(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),i.$message.error({message:"信息更新失败!请检查密码"});case 12:case"end":return n.stop()}},o,i,[[0,9]])}))()}}),computed:c()({},Object(m.c)(["isLogin","user"]))},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my_box",style:e.$pcShow?"":"width:100%;display: flex;"},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[s("el-form-item",[s("div",{staticStyle:{display:"flex","align-items":"center"}},[e.sendedImg?e._e():s("img",{staticStyle:{height:"4rem",cursor:"pointer","border-radius":"50%"},attrs:{src:e.user.headImg,alt:""}}),e._v(" "),e.sendedImg?s("img",{staticStyle:{height:"4rem",cursor:"pointer","border-radius":"50%"},attrs:{src:e.sendedImg,alt:""}}):e._e(),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{action:"","show-file-list":!1,"http-request":e.uploadFile}},[s("el-button",{staticClass:"changeHead",attrs:{size:"small",type:"primary"}},[e._v("更改头像")])],1)],1)]),e._v(" "),s("el-form-item",{attrs:{label:"昵称"}},[s("el-input",{model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-radio-group",{attrs:{label:"left"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("el-radio",{attrs:{label:"男"}}),e._v(" "),s("el-radio",{attrs:{label:"女"}}),e._v(" "),s("el-radio",{attrs:{label:"外星人"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"个人简介"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(l,f,!1,function(e){s("I/56")},"data-v-211474db",null);t.default=d.exports}});
//# sourceMappingURL=12.966931944bec9a1c35de.js.map