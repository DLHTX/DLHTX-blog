{"version":3,"sources":["webpack:///src/pages/writeBlog/writeBlog.vue","webpack:///./src/pages/writeBlog/writeBlog.vue?3445","webpack:///./src/pages/writeBlog/writeBlog.vue"],"names":["writeBlog","name","components","Header","Footer","lottieSave","lottie_save","data","title","markdownValue","blogClass","blogClassList","interval","bgImg","attach","fileList","uploadUrl","blog","upload","progress","showProgress","upFileUrl","isIndex","isTop","created","this","findBlogClass","autoSave","console","log","mounted","initData","methods","extends_default","Object","vuex_esm","fnaddBlogClass","_this","$prompt","confirmButtonText","cancelButtonText","then","_ref","value","addBlogClass","catch","$message","type","message","className","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","sent","success","setTimeout","error","t0","errorMsg","stop","fnDelete","_this3","$confirm","deleteBlogClass","_this4","_callee2","_context2","fnisIndex","fnisTop","clearUpfile","uploadSuccess","e","uploadProgress","percent","handleChange","file","fnclose","window","close","fnSaveBlog","_this5","_callee3","res","_context3","abrupt","saveBlog","user","localStorage","removeItem","_this6","_callee4","_context4","getItem","blogSave2","JSON","parse","body","_this7","setInterval","blogSave","setItem","stringify_default","checkLeave","event","returnValue","$imgAdd","pos","$file","_this8","formdata","FormData","append","upImg","$refs","md","$img2Url","computed","writeBlog_writeBlog","render","_vm","_h","$createElement","_c","_self","attrs","id","onbeforeunload","staticStyle","height","line-height","background","staticClass","font-size","color","padding-left","cursor","on","click","$event","_v","float","width","text-align","user-select","style","_s","placeholder","model","callback","$$v","expression","slot","position","opacity","top","opcity","action","on-change","file-list","on-success","on-progress","size","Math","floor","_e","right","display","background-color","_l","blogclass","key","label","preventDefault","overflow","ref","ishljs","toolbarsBackground","previewBackground","imgAdd","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.f46f59fc3ed7fbfc78d2.js","sourcesContent":["<template>\n    <div id=\"main\" onbeforeunload=\"checkLeave()\">\n        <div style=\"height:40px;line-height:40px;background: #eaeaea;\">\n            <i class=\"iconfont icon-close\" @click='fnclose()'\n                style=\"font-size: 2rem;color: rgb(84, 84, 84);padding-left: 17px;cursor:pointer;\"></i>\n\n            <div @click='fnSaveBlog()'\n                style=\"cursor:pointer;height: 100%;float: right;width: 6rem;text-align: center;color: white;background:linear-gradient(45deg, #9000ff, #5e00ff)\">\n                发布</div>\n            <div @click='fnisTop()' :style=\"isTop=='开'?'color: white;background: rgb(64, 64, 64);':''\"\n                style=\"cursor:pointer;height: 100%;float: right;width: 7rem;text-align: center;color: #474844;background: #dfe0dc; user-select:none;\">\n                是否置顶({{isTop}})</div>\n            <div @click='fnisIndex()' :style=\"isIndex=='开'?'':'color: #474844;background: #dfe0dc; user-select:none;'\"\n                style=\"cursor:pointer;height: 100%;float: right;width: 7rem;text-align: center;color: white;background: rgb(64, 64, 64);\">\n                首页可见({{isIndex}})</div>\n        </div>\n\n        <el-input placeholder=\"请输入内容\" v-model=\"title\">\n            <template slot=\"prepend\" style=\"color: #ff6b6b;\">标题</template>\n        </el-input>\n        <el-input placeholder=\"请输入图片地址(默认为上传的第一张图片)\" v-model=\"bgImg\">\n            <template slot=\"prepend\" style=\"color: #ff6b6b;\">封面</template>\n        </el-input>\n        <div style=\"height: 40px;position: relative;\">\n            <span class=\"upLoad\">上传附件</span>\n            <el-upload class=\"upload-demo\" :action=\"uploadUrl\" :on-change=\"handleChange\" :file-list=\"fileList\"\n                style=\"opacity: 0;top: 5px;position: absolute;height: 40px;opcity:0;\" :on-success='uploadSuccess'\n                :on-progress='uploadProgress'>\n                <el-button size=\"small\" type=\"primary\">上传附件</el-button>\n            </el-upload>\n            <span class=\"progress\" :style=\"'width: calc('+progress+'% - 70px);'\"\n                v-if='showProgress&&progress > 5'>{{Math.floor(progress)}}%</span>\n            <span class=\"upFileUrl\">{{upFileUrl}} <i v-if='upFileUrl' class=\"iconfont icon-close\" @click='clearUpfile()'\n                    style=\"cursor:pointer;float: right;height: 40px;line-height: 40px;font-size: 31px;position: absolute;right: 0;\"></i>\n            </span>\n        </div>\n        <div style=\"height: 40px;position: relative;display: flex;\">\n            <span class=\"upLoad\" style=\"background-color: rgb(245, 247, 250);cursor: pointer;background: #696969;\" @click='fnaddBlogClass()'>增加分类</span>\n            <el-select placeholder=\"请选择博客分类\" style=\"width: 95%;display: inline-block;\" v-model=\"blogClass\">\n                <el-option :label=\"blogclass.className\" :value=\"blogclass.className\" v-for='blogclass in blogClassList'\n                    :key=\"blogclass.id\">\n                    <span style=\"float: left; font-size: 13px\">{{blogclass.className}}</span>\n                    <span class='iconfont icon-close' style=\"float:right;color: rgb(255, 255, 255);font-size: 28px;\"\n                        @click.prevent='fnDelete(blogclass.className)'></span>\n                </el-option>\n            </el-select>\n        </div>\n\n        <div style=\"height: 90%;overflow: scroll;\">\n            <mavon-editor v-model=\"markdownValue\" :ishljs=\"true\" style=\"height: 100%;\" ref=md @imgAdd=\"$imgAdd\"\n                :toolbarsBackground=\"'#5d5d5d'\" :previewBackground=\"'#5d5d5d'\" />\n        </div>\n        <!-- <div class=\"btn hvr-hang\" ><i class=\"iconfont icon-baocun\"></i></div> -->\n        <!-- <a href=\"#\" data-title=\"Awesome Button\" @mousemove=\"move(this)\" @mouseleave='leave(this)' @mousedown=\"down()\" @mouseup=\"up()\"></a> -->\n        <!-- <div @click='fnSaveBlog()' style=\"cursor:pointer\">\n            \n        </div> -->\n    </div>\n</template>\n\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport auth from \"../../api/auth\";\nimport blog from \"../../api/blog\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from \"../../components/Footer/Footer\";\n// import Auth from \"../../helpers/loginAnimate.js\";\nimport lottieSave from '../../components/lottie/lottie-save'\nimport axios from 'axios'\nexport default {\n    name: \"index\",\n    components: {\n        Header,\n        Footer,\n        lottieSave\n    },\n    data() {\n        return {\n            title: '',\n            markdownValue: '',\n            blogClass: '',\n            blogClassList: [],\n            interval: '',\n            bgImg: '',\n            attach: '',\n            fileList: [],\n            uploadUrl: blog.upload(),//请求的地址\n            progress: 0,\n            showProgress: false,\n            upFileUrl: '',//请求成功的地址\n            isIndex: '开',\n            isTop: '关'\n        };\n    },\n    created() {\n        this.findBlogClass()\n        this.autoSave()\n        console.log('created')\n        // window.onbeforeunload=function(e){\n        // 　　var e = window.event||e;  \n        // 　　e.returnValue=(\"确定离开当前页面吗？\");\n        // } \n    },\n    mounted() {\n        console.log('mounted')\n        this.initData()\n        // window.onbeforeunload=function(e){     \n        // 　　var e = window.event||e;  \n        // 　　e.returnValue=(\"确定离开当前页面吗？\");\n        //     if(event.clientX>document.body.clientWidth && event.clientY < 0 || event.altKey){ \n        //         alert(\"你关闭了浏览器\"); \n        //     }else{ \n        //         alert(\"你正在刷新页面\"); \n        //     }\n        // } \n    },\n    methods: {\n        ...mapActions([\"login\", \"checkLogin\", \"logout\", \"getPermissions\"]),\n        fnaddBlogClass(){\n            this.$prompt('请输入博客分类', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n            }).then(({ value }) => {\n                   this.addBlogClass(value)\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '取消输入'\n                });       \n            });\n        },\n        async addBlogClass(className){\n            try {\n                let res = await blog.addBlogClass(className)\n                if (res.success) {\n                    this.$message.success({ message: '增加成功' })\n                    setTimeout(() => {\n                        this.findBlogClass()\n                    }, 1500)\n                } else {\n                    this.$message.error({ message: '删除失败' })\n                }\n            } catch (err) {\n                console.log(err)\n                this.$message.error({ message: err.errorMsg })\n            }\n        },\n\n        fnDelete(className) {\n            this.$confirm('此操作将删除分类[' + className + '], 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.deleteBlogClass(className)\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                });\n            });\n        },\n        async deleteBlogClass(className) {\n            try {\n                let res = await blog.deleteBlogClass(className)\n                if (res.success) {\n                    this.$message.success({ message: '删除成功' })\n                    this.blogClass = ''\n                    setTimeout(() => {\n                        this.findBlogClass()\n                    }, 1500)\n                } else {\n                    this.$message.error({ message: '删除失败' })\n                }\n            } catch (err) {\n                console.log(err)\n                this.$message.error({ message: err.errorMsg })\n            }\n        },\n\n        fnisIndex() {\n            if (this.isIndex == '开') {\n                this.isIndex = '关'\n            } else {\n                this.isIndex = '开'\n            }\n        },\n        fnisTop() {\n            if (this.isTop == '开') {\n                this.isTop = '关'\n            } else {\n                this.isTop = '开'\n            }\n        },\n        clearUpfile() {\n            this.upFileUrl = ''\n        },\n        uploadSuccess(e) {//上传附件\n            console.log(e)\n            this.showProgress = false\n\n            if (e.success) {\n                this.upFileUrl = e.data\n            } else {\n                this.$message.error('上传失败')\n            }\n        },\n        uploadProgress(e) {\n            this.showProgress = true\n            this.progress = e.percent\n        },\n        handleChange(file, fileList) {\n            // this.fileList = fileList.slice(-3);\n        },\n        fnclose() {\n            window.close();\n        },\n        async fnSaveBlog() {\n            console.log(this.blogClass)\n            try {\n                if (this.title == '' || this.markdownValue == '' || this.blogClass == '') return this.$message({ message: '输入内容不可为空', type: 'warning' })\n                let isTop = this.isTop == '开' ? 1 : 0\n                let isIndex = this.isIndex == '开' ? 1 : 0\n                let res = await blog.saveBlog(this.user.name, this.title, this.markdownValue, this.blogClass, this.bgImg, this.upFileUrl, isTop, isIndex)\n                console.log(res)\n                if (res.success) {\n                    this.$message({ message: '保存成功', type: 'success' })\n                    //清空数据\n                    localStorage.removeItem('blogSave')\n                    //clearInterval(this.interval)\n                    this.title = ''\n                    this.markdownValue = ''\n                    this.blogClass = ''\n                    this.upFileUrl = ''\n                    this.bgImg = ''\n                    setTimeout(() => {\n                        window.close();\n                    }, 1000)\n                }\n            } catch (err) {\n                console.log(err)\n                this.$message.error({ message: err.errorMsg })\n            }\n        },\n        //查找博客分类方法\n        async findBlogClass() {\n            let res = await blog.findBlogClass()\n            if (res.success) {\n                this.blogClassList = res.data\n            }\n        },\n        //初始化数据\n        initData() {\n            if (localStorage.getItem('blogSave')) {\n                let blogSave2 = JSON.parse(localStorage.getItem('blogSave'))\n                this.title = blogSave2.title\n                this.blogClass = blogSave2.blogClass\n                this.markdownValue = blogSave2.body\n                this.upFileUrl = blogSave2.upFileUrl\n                this.bgImg = blogSave2.bgImg\n            }\n        },\n        autoSave() {\n            this.interval = setInterval(() => {\n                let blogSave = {}\n                blogSave.title = this.title //自动保存标题\n                blogSave.blogClass = this.blogClass//自动保存分类\n                blogSave.body = this.markdownValue\n                blogSave.upFileUrl = this.upFileUrl\n                blogSave.bgImg = this.bgImg\n                localStorage.setItem('blogSave', JSON.stringify(blogSave))//把用户信息存到localStorage\n            }, 10000)\n\n        },\n        checkLeave() {\n            event.returnValue = \"确定离开当前页面吗？\";\n        },\n        // 绑定@imgAdd event\n\n        $imgAdd(pos, $file) {\n            //上传图片接口\n            console.log($file)\n            var formdata = new FormData();\n            formdata.append('file', $file);\n            blog.upImg(formdata).then(res => {\n                if (res.success) {\n                    this.$message({ message: '图片上传成功', type: 'success' })\n                    if (!this.bgImg) {\n                        this.bgImg = res.data\n                    }\n                    this.$refs.md.$img2Url(pos, res.data);\n                } else {\n                    this.$message.error({ message: '上传图片失败' })\n                }\n            })\n        },\n    },\n    computed: {\n        ...mapGetters([\"isLogin\", \"user\"])\n    }\n};\n</script>\n<style lang=\"less\" scoped>\n@import \"../../assets/css/auth.css\";\n\n::-webkit-scrollbar-thumb {\n    background: white !important;\n}\n::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n    background-color: white !important;\n}\n.upLoad {\n    height: 40px;\n    display: inline-block;\n    background: #696969;\n    width: 70px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 13px;\n    color: #ffffff;\n}\n.progress {\n    height: 40px;\n    display: inline-block;\n    width: calc(100% - 70px);\n    background: #5252523d;\n    position: absolute;\n    top: 0;\n    margin-left: 70px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.upFileUrl {\n    height: 40px;\n    display: inline-block;\n    width: calc(90% - 70px);\n    position: absolute;\n    top: 0;\n    margin-left: 70px;\n    display: flex;\n    align-items: center;\n    padding-left: 17px;\n}\na {\n    position: relative;\n    display: inline-block;\n    padding: 1.2em 2em;\n    text-decoration: none;\n    text-align: center;\n    cursor: pointer;\n    user-select: none;\n    color: white;\n\n    &::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background: linear-gradient(135deg, #6e8efb, #a777e3);\n        border-radius: 4px;\n        transition: box-shadow 0.5s ease, transform 0.2s ease;\n        will-change: transform;\n        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n        transform: translateY(var(--ty, 0)) rotateX(var(--rx, 0))\n            rotateY(var(--ry, 0)) translateZ(var(--tz, -12px));\n    }\n\n    &:hover::before {\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n    }\n\n    &::after {\n        position: relative;\n        display: inline-block;\n        content: attr(data-title);\n        transition: transform 0.2s ease;\n        font-weight: bold;\n        letter-spacing: 0.01em;\n        will-change: transform;\n        transform: translateY(var(--ty, 0)) rotateX(var(--rx, 0))\n            rotateY(var(--ry, 0));\n    }\n}\n\n#main {\n    height: 100vh;\n}\n.v-note-op {\n    border: 1px solid #e6e6e6 !important;\n    box-shadow: none !important;\n}\n.btn {\n    position: fixed;\n    top: 87%;\n    right: 3%;\n    z-index: 9999;\n    height: 50px;\n    width: 50px;\n    background: #f97575;\n    border-radius: 50%;\n    color: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    transition: all 0.3s;\n    &:hover {\n        background: #ff6262;\n        box-shadow: 0 0 6px 1px #ff8888;\n        transition: all 0.3s;\n    }\n}\n.markdown-body img {\n    max-height: 40rem;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/writeBlog/writeBlog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\",\"onbeforeunload\":\"checkLeave()\"}},[_c('div',{staticStyle:{\"height\":\"40px\",\"line-height\":\"40px\",\"background\":\"#eaeaea\"}},[_c('i',{staticClass:\"iconfont icon-close\",staticStyle:{\"font-size\":\"2rem\",\"color\":\"rgb(84, 84, 84)\",\"padding-left\":\"17px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.fnclose()}}}),_vm._v(\" \"),_c('div',{staticStyle:{\"cursor\":\"pointer\",\"height\":\"100%\",\"float\":\"right\",\"width\":\"6rem\",\"text-align\":\"center\",\"color\":\"white\",\"background\":\"linear-gradient(45deg, #9000ff, #5e00ff)\"},on:{\"click\":function($event){_vm.fnSaveBlog()}}},[_vm._v(\"\\n            发布\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"cursor\":\"pointer\",\"height\":\"100%\",\"float\":\"right\",\"width\":\"7rem\",\"text-align\":\"center\",\"color\":\"#474844\",\"background\":\"#dfe0dc\",\"user-select\":\"none\"},style:(_vm.isTop=='开'?'color: white;background: rgb(64, 64, 64);':''),on:{\"click\":function($event){_vm.fnisTop()}}},[_vm._v(\"\\n            是否置顶(\"+_vm._s(_vm.isTop)+\")\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"cursor\":\"pointer\",\"height\":\"100%\",\"float\":\"right\",\"width\":\"7rem\",\"text-align\":\"center\",\"color\":\"white\",\"background\":\"rgb(64, 64, 64)\"},style:(_vm.isIndex=='开'?'':'color: #474844;background: #dfe0dc; user-select:none;'),on:{\"click\":function($event){_vm.fnisIndex()}}},[_vm._v(\"\\n            首页可见(\"+_vm._s(_vm.isIndex)+\")\")])]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}},[_c('template',{staticStyle:{\"color\":\"#ff6b6b\"},slot:\"prepend\"},[_vm._v(\"标题\")])],2),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入图片地址(默认为上传的第一张图片)\"},model:{value:(_vm.bgImg),callback:function ($$v) {_vm.bgImg=$$v},expression:\"bgImg\"}},[_c('template',{staticStyle:{\"color\":\"#ff6b6b\"},slot:\"prepend\"},[_vm._v(\"封面\")])],2),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"40px\",\"position\":\"relative\"}},[_c('span',{staticClass:\"upLoad\"},[_vm._v(\"上传附件\")]),_vm._v(\" \"),_c('el-upload',{staticClass:\"upload-demo\",staticStyle:{\"opacity\":\"0\",\"top\":\"5px\",\"position\":\"absolute\",\"height\":\"40px\",\"opcity\":\"0\"},attrs:{\"action\":_vm.uploadUrl,\"on-change\":_vm.handleChange,\"file-list\":_vm.fileList,\"on-success\":_vm.uploadSuccess,\"on-progress\":_vm.uploadProgress}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"上传附件\")])],1),_vm._v(\" \"),(_vm.showProgress&&_vm.progress > 5)?_c('span',{staticClass:\"progress\",style:('width: calc('+_vm.progress+'% - 70px);')},[_vm._v(_vm._s(Math.floor(_vm.progress))+\"%\")]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"upFileUrl\"},[_vm._v(_vm._s(_vm.upFileUrl)+\" \"),(_vm.upFileUrl)?_c('i',{staticClass:\"iconfont icon-close\",staticStyle:{\"cursor\":\"pointer\",\"float\":\"right\",\"height\":\"40px\",\"line-height\":\"40px\",\"font-size\":\"31px\",\"position\":\"absolute\",\"right\":\"0\"},on:{\"click\":function($event){_vm.clearUpfile()}}}):_vm._e()])],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"40px\",\"position\":\"relative\",\"display\":\"flex\"}},[_c('span',{staticClass:\"upLoad\",staticStyle:{\"background-color\":\"rgb(245, 247, 250)\",\"cursor\":\"pointer\",\"background\":\"#696969\"},on:{\"click\":function($event){_vm.fnaddBlogClass()}}},[_vm._v(\"增加分类\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"95%\",\"display\":\"inline-block\"},attrs:{\"placeholder\":\"请选择博客分类\"},model:{value:(_vm.blogClass),callback:function ($$v) {_vm.blogClass=$$v},expression:\"blogClass\"}},_vm._l((_vm.blogClassList),function(blogclass){return _c('el-option',{key:blogclass.id,attrs:{\"label\":blogclass.className,\"value\":blogclass.className}},[_c('span',{staticStyle:{\"float\":\"left\",\"font-size\":\"13px\"}},[_vm._v(_vm._s(blogclass.className))]),_vm._v(\" \"),_c('span',{staticClass:\"iconfont icon-close\",staticStyle:{\"float\":\"right\",\"color\":\"rgb(255, 255, 255)\",\"font-size\":\"28px\"},on:{\"click\":function($event){$event.preventDefault();_vm.fnDelete(blogclass.className)}}})])}))],1),_vm._v(\" \"),_c('div',{staticStyle:{\"height\":\"90%\",\"overflow\":\"scroll\"}},[_c('mavon-editor',{ref:\"md\",staticStyle:{\"height\":\"100%\"},attrs:{\"ishljs\":true,\"toolbarsBackground\":'#5d5d5d',\"previewBackground\":'#5d5d5d'},on:{\"imgAdd\":_vm.$imgAdd},model:{value:(_vm.markdownValue),callback:function ($$v) {_vm.markdownValue=$$v},expression:\"markdownValue\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-614b5145\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/writeBlog/writeBlog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-614b5145\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./writeBlog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./writeBlog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./writeBlog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-614b5145\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./writeBlog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-614b5145\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/writeBlog/writeBlog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}